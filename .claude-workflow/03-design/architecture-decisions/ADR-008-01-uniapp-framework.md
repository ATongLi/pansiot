# ADR-008-01: 采用 UniApp 作为跨平台移动开发框架

## Status
Accepted

## Date
2026-01-28

## Context
需要开发一款工业物联网移动端应用,要求支持 iOS、Android、微信小程序和 H5 多端运行。需要选择一个跨平台开发框架,以降低开发成本,提高开发效率。

## Decision
选择 **UniApp** 作为跨平台移动开发框架。

### Rationale
1. **一次开发,多端运行**: 一套代码可编译到 iOS、Android、Web(响应式)、以及各种小程序(微信/支付宝/百度/头条/飞书/QQ/快手/钉钉/淘宝)、快应用等多个平台
2. **Vue 语法**: 团队熟悉 Vue 生态,学习成本低
3. **官方维护**: DCloud 官方维护,长期稳定,生态完善
4. **性能优秀**: 使用原生渲染,性能接近原生应用
5. **插件生态**: 拥有丰富的插件市场和组件库
6. **社区活跃**: 庞大的开发者社区,问题容易解决
7. **工程化成熟**: 支持 TypeScript、Vite、ESLint 等现代前端工程化工具

### Alternatives Considered

#### 1. Taro
- **优势**:
  - 支持React/Vue语法
  - 京东开源,社区活跃
- **劣势**:
  - 团队更熟悉 Vue
  - 多端编译稳定性不如 UniApp
- **结论**: 不选择

#### 2. 原生开发 (Swift + Kotlin)
- **优势**:
  - 性能最优
  - 功能最完整
- **劣势**:
  - 需要维护两套代码
  - 开发成本高
  - 人力成本高
- **结论**: 不选择

#### 3. Flutter
- **优势**:
  - 性能优秀
  - UI 精美
- **劣势**:
  - 使用 Dart 语言,学习成本高
  - 团队不熟悉
  - 不支持小程序
- **结论**: 不选择

#### 4. React Native
- **优势**:
  - Facebook 开源,生态成熟
  - 性能优秀
- **劣势**:
  - 使用 React,团队不熟悉
  - 不支持小程序
- **结论**: 不选择

## Consequences

### Positive
1. **降低开发成本**: 一套代码覆盖多端,大幅降低开发和维护成本
2. **快速迭代**: 统一代码库,快速迭代和发布新功能
3. **团队效率**: 使用 Vue 语法,团队上手快,开发效率高
4. **生态完善**: 丰富的组件库和插件,减少重复造轮子
5. **长期维护**: DCloud 官方维护,长期稳定更新

### Negative
1. **性能略逊于原生**: 使用 WebView 渲染,性能不如原生(但差距不大)
2. **某些原生功能受限**: 部分原生高级功能可能需要使用原生插件
3. **平台差异**: 不同平台存在差异,需要条件编译处理
4. **包体积较大**: 相比原生,包体积会稍大

### Mitigation Strategies
1. **性能优化**:
   - 代码分包和懒加载
   - 图片优化和压缩
   - 虚拟列表优化长列表
   - 缓存策略减少请求

2. **原生功能**:
   - 关键功能使用原生插件
   - 利用 UniApp 原生插件市场
   - 必要时开发自定义原生插件

3. **平台差异**:
   - 使用条件编译处理平台差异
   - 提前测试各端兼容性
   - 建立平台差异处理文档

4. **包体积优化**:
   - Tree Shaking 移除未使用代码
   - 分包加载减少主包体积
   - 按需引入第三方库

## Related Decisions
- ADR-008-02: 使用 Pinia 作为状态管理方案
- ADR-008-03: 使用 TypeScript 开发
- ADR-008-04: 封装 uni.request 作为 HTTP 客户端
