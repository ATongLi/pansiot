# FE-001: Scada主页面布局功能

## 功能需求信息

**需求ID**: FE-001
**需求标题**: Scada主页面布局功能
**来源需求**: REQ-001
**创建日期**: 2026-01-20
**目标平台**: Scada
**状态**: ✅ 已完成

## 功能需求分解

### FE-001-1: 顶部栏组件 (TopBar)

**描述**: 应用顶部标题栏，显示应用标题和窗口控制

**功能点**:
1. 显示应用标题 "PanTools"
2. 窗口控制按钮组
   - 最小化按钮（Windows风格：方形透明背景，悬停浅灰）
   - 最大化/还原按钮（Windows风格：方形透明背景，悬停浅灰）
   - 关闭按钮（Windows风格：方形透明背景，悬停红色#E81123）
3. 窗口拖拽区域（Electron）

**验收标准**:
- [x] 标题居左显示
- [x] 窗口控制按钮居右显示
- [x] 按钮有悬停效果
- [x] 支持窗口拖拽（`-webkit-app-region: drag`）
- [x] **CR-002**: Windows风格方形透明按钮（非macOS圆形彩色）
- [x] **CR-002补充**: 最左侧显示Logo图标
- [x] **CR-002补充**: Logo与标题"PanTools"视觉协调

**实现文件**:
- `src/components/layout/TopBar.tsx`
- `src/components/layout/TopBar.css`
- `src/components/common/WindowControls.tsx`
- `src/components/common/WindowControls.css`

---

### FE-001-2: 侧边栏导航组件 (Sidebar)

**描述**: 左侧垂直导航栏，提供主要功能入口

**功能点**:
1. 显示5个导航项：
   - 首页 (SVG线框图标)
   - 本地 (SVG线框图标)
   - 云端 (SVG线框图标)
   - 工具 (SVG线框图标)
   - User (SVG线框图标)
2. 导航状态管理
3. 激活项高亮显示（工业蓝#2196F3背景，白色图标和文字）
4. 悬停效果

**验收标准**:
- [x] 5个导航项全部显示
- [x] 默认激活"首页"
- [x] 点击导航项切换激活状态
- [x] 只能有一个激活项
- [x] **CR-002**: 激活项背景色为工业蓝 #2196F3（原#FF9999粉色）
- [x] **CR-002**: 图标为SVG线框型，1.5px描边（原Emoji）
- [x] 悬停时背景色变浅
- [x] 支持 Tab 键导航
- [x] 支持 Enter/Space 激活
- [x] **CR-002补充**: TopBar和Sidebar背景色略有区分，增加视觉层次
- [x] **CR-002补充**: NavItem布局与60px宽度的Sidebar更协调

**实现文件**:
- `src/components/layout/Sidebar.tsx`
- `src/components/layout/Sidebar.css`
- `src/components/navigation/NavItem.tsx`
- `src/components/navigation/NavItem.css`
- `src/constants/icons.ts` (**CR-002**: 新建SVG图标文件)
- `src/store/uiStore.ts` (MobX状态管理)

---

### FE-001-3: 主内容区组件 (MainContent)

**描述**: 页面主要内容显示区域

**功能点**:
1. 响应式布局（flex: 1）
2. 垂直滚动支持
3. 最大宽度限制（1200px）
4. 居中对齐

**验收标准**:
- [x] 占据剩余空间
- [x] 内容超出时可滚动
- [x] 内容居中显示
- [x] 内边距正确（32px）

**实现文件**:
- `src/components/layout/MainContent.tsx`
- `src/components/layout/MainContent.css`

---

### FE-001-4: 操作按钮组组件 (ActionButtons)

**描述**: 三个主要工程操作入口

**功能点**:
1. "新建工程" - 从零开始创建新的工程配置
2. "从文件打开" - 打开已保存的工程文件
3. "复制工程" - 基于现有工程创建副本
4. **CR-002第三批**: 采用卡片式设计，每个操作包含图标、标题和描述
5. **CR-002第四批**: 添加"开始"标题，卡片尺寸优化

**验收标准**:
- [x] 操作区域上方显示"开始"标题
- [x] 三个操作卡片网格布局（自适应宽度，最小120px）
- [x] **CR-002第四批**: 每个卡片包含32×32px图标（工业蓝#2196F3）
- [x] **CR-002第四批**: 卡片采用竖向居中布局
- [x] **CR-002第四批**: 每个卡片包含主标题（13px加粗）
- [x] **CR-002第四批**: 每个卡片包含描述文字（11px次要文字）
- [x] **CR-002第三批**: 卡片悬停时边框高亮为工业蓝
- [x] **CR-002第三批**: 卡片悬停时上浮2px
- [x] **CR-002第三批**: 卡片悬停时显示阴影
- [x] 点击功能正常（当前为Mock实现）
- [x] 支持键盘导航（Tab、Enter、Space）

**实现文件**:
- `src/components/layout/MainContent.tsx` - **CR-002第四批**: 添加"开始"标题
- `src/components/layout/MainContent.css` - **CR-002第四批**: 标题样式
- `src/components/workspace/ActionButtons.tsx`
- `src/components/workspace/ActionButtons.css`

---

### FE-001-5: 最近工程列表组件 (RecentProjects)

**描述**: 显示最近打开的工程项目

**功能点**:
1. 标题："最近工程"
2. 网格布局（响应式）
3. 工程卡片：
   - 工程图标（📁）
   - 工程名称
   - 最后打开日期
4. 悬停效果（边框高亮 + 阴影）

**验收标准**:
- [x] 标题正确显示
- [x] 卡片网格布局（最小宽度200px）
- [x] 显示3个示例工程
- [x] 卡片有悬停效果
- [x] **CR-002**: 边框颜色变为工业蓝 #2196F3（原#FF9999）
- [x] 显示阴影

**实现文件**:
- `src/components/workspace/RecentProjects.tsx`
- `src/components/workspace/RecentProjects.css`

---

### FE-001-6: 状态管理 (UI Store)

**描述**: MobX状态管理，管理UI状态

**功能点**:
1. 导航状态（activeNavItem）
2. 导航项列表（navigationItems）
3. 窗口状态（windowState）
4. 窗口操作处理（handleWindowAction）

**验收标准**:
- [x] 使用 `makeAutoObservable`
- [x] 状态变化触发组件重新渲染
- [x] `setActiveNavItem` 方法正常工作
- [x] `handleWindowAction` 处理窗口操作
- [x] 当前为Mock实现（控制台日志）

**实现文件**:
- `src/store/uiStore.ts`
- `src/store/index.ts`

---

### FE-001-7: 类型系统 (TypeScript Types)

**描述**: TypeScript类型定义

**功能点**:
1. 导航项类型（NavItem）
2. 窗口状态类型（WindowState, WindowAction）
3. 工程项目类型（RecentProject）

**验收标准**:
- [x] 所有类型定义完整
- [x] 类型导出正确
- [x] 在组件中正确使用

**实现文件**:
- `src/types/navigation.ts`
- `src/types/window.ts`
- `src/types/project.ts`

---

## 设计规范

### 视觉设计
- **颜色方案** (**CR-002**: 工业专业风格):
  - 主背景: #f5f5f5
  - 次背景: #ffffff
  - 边框: #d0d0d0
  - **激活状态: 工业蓝 #2196F3** (原#FF9999粉色, CR-002更新)
  - **文字: #212121** (原#333333, CR-002加深)
  - 次文字: #666666
  - 辅文字: #999999
  - 悬停背景: rgba(0, 0, 0, 0.04)
  - **CR-002补充**: 顶部栏背景: #fafafa (视觉区分)
  - **CR-002补充**: 侧边栏背景: #f8f8f8 (视觉区分)

- **图标系统** (**CR-002**: SVG线框风格):
  - 类型: SVG线框图标 (1.5px描边, round caps/joins)
  - 颜色: currentColor (继承文字颜色)
  - 尺寸: 24×24px viewBox
  - 激活状态: 白色图标在蓝色背景上
  - **CR-002补充**: Logo图标 32×32px viewBox，品牌蓝色填充

- **尺寸规范** (**CR-002**: 更紧凑的工业软件布局):
  - **顶部栏高度: 32px** (原40px, CR-002)
  - **侧边栏宽度: 60px** (原80px→120px→60px, CR-001+CR-002)
  - **导航项高度: 56px** (原70px, CR-002)
  - **CR-002补充**: 导航图标 26×26px (适应60px宽度)
  - **CR-002补充**: 导航文字 10px (适应60px宽度)
  - **CR-002补充**: Logo 20×20px
  - 圆角: 4px

- **间距系统** (**CR-002**: 8px网格):
  - XS: 4px (内部微调)
  - SM: 8px (小间距)
  - MD: 12px (中间距, 原16px)
  - LG: 16px (大间距, 原24px)
  - XL: 24px (超大间距, 原32px)

- **字号系统** (**CR-002**: 5级字号):
  - XS: 11px (辅助文字)
  - SM: 12px (次要文字)
  - MD: 13px (常规文字)
  - Base: 14px (基准文字)
  - LG: 16px (标题)

### 交互设计
- **过渡动画**: 150ms ease
- **悬停效果**:
  - 导航项: 浅灰背景
  - 按钮: 边框高亮 + 浅灰背景
  - 窗口控制: 浅灰背景, 关闭按钮红色
- **激活反馈**: 工业蓝#2196F3背景色, 白色文字和图标

### 窗口控制风格 (**CR-002**: Windows平台风格)
- **按钮样式**: 方形透明背景 (非macOS圆形彩色)
- **宽度**: 46px (Windows标准)
- **悬停效果**: 浅灰背景
- **关闭按钮悬停**: Windows红色#E81123 + 白色图标
- **图标**: SVG线框图标 (10×10px)

### 设计原则
- **工业专业性**: 低饱和度、高对比度、功能明确
- **Windows原生**: 遵循Fluent Design设计规范
- **扁平轻便**: 物联网扁平风格, 减少装饰元素
- **紧凑高效**: 更小的尺寸, 更密集的信息密度

## 可追溯性

**关联文档**:
- 原始需求: REQ-001
- 技术方案: SOL-001
- 实施计划: IMP-001
- 用户故事: US-001

**代码实现**:
- 位置: `platforms/scada/packages/renderer/src/`
- 文件数: 28个
- 代码行数: ~600行（含注释和空行）

## 测试状态

- [x] 视觉测试通过
- [x] 功能测试通过
- [x] MobX响应式测试通过
- [x] 可访问性测试通过
- [ ] 开发服务器测试（待用户验证）
