# US-001: Scada主页面框架用户故事

## 用户故事信息

**用户故事ID**: US-001
**用户故事标题**: Scada主页面框架用户故事
**来源需求**: REQ-001
**关联功能需求**: FE-001
**创建日期**: 2026-01-20
**目标平台**: Scada
**优先级**: P0 (高)
**状态**: ✅ 已完成

## 用户角色

**主要角色**: 工业自动化工程师
**次要角色**: HMI工程编辑器用户

**角色描述**:
- 工业现场HMI工程的设计和维护人员
- 需要创建和编辑工业监控界面
- 习惯使用专业工业软件（如WinCC、Intouch）
- 追求高效、专业的操作体验
- 对界面美感和专业性有较高要求

## 用户故事

### 主故事

**作为** 一名工业自动化工程师

**我想要** 使用一个具有工业物联网软件风格的精简主页面框架

**以便于** 我能够快速上手并高效地创建和管理HMI工程项目

### 故事细分

#### US-001-1: 顶部导航栏

**作为** 工业自动化工程师

**我想要** 在应用顶部看到一个清晰的应用标题和标准的窗口控制按钮

**以便于** 我能够识别当前应用程序，并能够最小化、最大化或关闭窗口

**验收标准**:
- [x] 顶部显示"PanTools"应用标题
- [x] 右侧显示三个窗口控制按钮（最小化、最大化、关闭）
- [x] 按钮使用交通灯颜色（黄、绿、红），符合macOS/Windows习惯
- [x] 可以拖拽顶部栏来移动窗口位置
- [x] 按钮有清晰的视觉反馈（悬停效果）

#### US-001-2: 侧边导航栏

**作为** 工业自动化工程师

**我想要** 在左侧看到一个包含主要功能入口的垂直导航栏

**以便于** 我能够快速切换到不同的功能模块（首页、本地、云端、工具、用户）

**验收标准**:
- [x] 导航栏宽度为80px，不占用过多空间
- [x] 显示5个导航项，每个都有清晰的图标和文字标签
- [x] 当前激活的导航项有明显的视觉区分（粉色/红色背景 #FF9999）
- [x] 点击导航项可以切换激活状态
- [x] 同一时间只有一个导航项处于激活状态
- [x] 悬停时有视觉反馈，提示可点击

#### US-001-3: 主内容区

**作为** 工业自动化工程师

**我想要** 在主内容区域看到常用的操作按钮和最近打开的工程项目列表

**以便于** 我能够快速开始新的工程项目或继续之前的工作

**验收标准**:
- [x] 显示三个主要操作按钮："从文件打开"、"新建工程"、"复制工程"
- [x] 按钮水平排列，间距一致
- [x] 按钮有悬停高亮效果（边框变为 #FF9999）
- [x] 点击按钮时有下压视觉反馈
- [x] 显示"最近工程"标题
- [x] 以卡片网格形式显示最近打开的工程项目
- [x] 每个卡片显示工程图标、名称和最后打开日期
- [x] 卡片悬停时有边框高亮和阴影效果

#### US-001-4: 响应式布局

**作为** 工业自动化工程师

**我想要** 页面布局能够适应不同的窗口尺寸

**以便于** 我能够在不同分辨率的显示器上使用应用程序

**验收标准**:
- [x] 主内容区占据剩余空间（flex: 1）
- [x] 内容超出时可以垂直滚动
- [x] 内容居中显示，最大宽度为1200px
- [x] 工程卡片使用响应式网格布局（自动换行）

#### US-001-5: 可访问性

**作为** 工业自动化工程师

**我想要** 能够使用键盘完成所有操作

**以便于** 我能够提高操作效率，符合专业软件的使用习惯

**验收标准**:
- [x] Tab键可以聚焦所有交互元素（导航项、按钮）
- [x] Enter或Space键可以激活聚焦的按钮
- [x] 窗口控制按钮有清晰的aria-label
- [x] 导航项有role="button"标识

## 用户场景

### 场景1: 首次启动应用

**前置条件**: 应用首次安装并启动

**用户操作流程**:
1. 用户双击启动PanTools Scada应用
2. 看到应用主页面，顶部显示"PanTools"标题
3. 左侧导航栏显示5个功能入口，默认激活"首页"
4. 主内容区显示三个操作按钮和示例工程列表
5. 用户观察界面，发现风格精简专业，符合工业软件习惯

**预期结果**: 用户对第一印象满意，认为界面专业、易用

### 场景2: 切换导航项

**前置条件**: 应用已启动，当前显示"首页"

**用户操作流程**:
1. 用户点击左侧导航栏的"本地"图标
2. "本地"导航项背景变为粉色（#FF9999）
3. "首页"导航项背景恢复为默认
4. 主内容区内容切换为"本地"相关内容（当前为占位）

**预期结果**: 用户能够流畅切换导航项，视觉反馈清晰

### 场景3: 操作工程项目

**前置条件**: 应用已启动，用户在"首页"

**用户操作流程**:
1. 用户将鼠标悬停在"从文件打开"按钮上
2. 按钮边框高亮为粉色，提示可点击
3. 用户点击按钮
4. 按钮有下压效果
5. 控制台输出日志（当前为Mock实现）

**预期结果**: 用户能够明确操作已被执行，视觉反馈清晰

### 场景4: 查看最近工程

**前置条件**: 应用已启动，用户在"首页"

**用户操作流程**:
1. 用户浏览"最近工程"列表
2. 看到三个示例工程卡片，以网格形式排列
3. 用户将鼠标悬停在第一个工程卡片上
4. 卡片边框变为粉色，出现阴影效果
5. 用户能够清晰看到工程名称和最后打开日期

**预期结果**: 用户能够快速识别并选择最近打开的工程项目

### 场景5: 键盘操作

**前置条件**: 应用已启动，用户偏好键盘操作

**用户操作流程**:
1. 用户按Tab键
2. 焦点移动到第一个导航项"首页"
3. 用户继续按Tab键
4. 焦点依次移动到其他导航项和按钮
5. 用户在某个导航项上按Enter键
6. 该导航项被激活

**预期结果**: 用户能够完全使用键盘完成所有操作，提高效率

## 验收标准

### 功能验收

- [x] **顶部栏**: 显示应用标题和三个窗口控制按钮
- [x] **侧边栏**: 显示5个导航项，支持点击切换
- [x] **主内容区**: 显示操作按钮和最近工程列表
- [x] **导航状态**: 只能有一个导航项处于激活状态
- [x] **悬停效果**: 所有交互元素有清晰的视觉反馈
- [x] **操作反馈**: 按钮点击有视觉和日志反馈（当前为Mock）

### 视觉验收

- [x] **颜色方案**: 工业物联网风格，主色调为粉色/红色（#FF9999）
- [x] **尺寸规范**: 顶部栏40px，侧边栏80px
- [x] **间距系统**: 使用4px网格，间距一致
- [x] **字体**: 干净的无衬线字体
- [x] **圆角**: 统一使用4px圆角

### 技术验收

- [x] **MobX响应式**: uiStore.activeNavItem变化时组件重新渲染
- [x] **TypeScript类型**: 所有类型定义完整，无类型错误
- [x] **CSS变量**: 使用CSS变量定义主题系统
- [x] **组件结构**: 按功能组织组件（layout、navigation、workspace、common）

### 可访问性验收

- [x] **键盘导航**: Tab键可以聚焦所有交互元素
- [x] **键盘激活**: Enter/Space可以激活聚焦的按钮
- [x] **语义化标签**: 窗口控制按钮有aria-label
- [x] **角色标识**: 导航项有role="button"

## 非功能性需求

### 性能需求

- **首屏渲染**: 页面初始渲染时间 < 100ms
- **交互响应**: 点击导航项后状态更新 < 50ms
- **内存占用**: 应用启动后内存占用 < 100MB

### 兼容性需求

- **操作系统**: Windows 10/11, macOS 10.15+
- **Electron版本**: 与桌面环境兼容
- **浏览器开发模式**: 支持Chrome/Edge最新版本（开发调试）

### 可维护性需求

- **代码组织**: 按功能分组组件
- **命名规范**: 使用BEM命名规范（CSS）
- **类型安全**: 完整的TypeScript类型定义
- **注释**: 关键逻辑有中文注释说明

## 优先级与工作量评估

### 优先级: P0 (高)

**理由**:
- 这是Scada平台的基础框架，后续所有功能都依赖于此
- 影响用户的第一印象和使用体验
- 必须在其他功能开发前完成

### 工作量评估

**前期规划**: 2小时
- 需求分析和设计
- 技术方案确定
- 组件结构规划

**实施开发**: 6小时
- 配置文件创建（vite.config.ts, tsconfig.json）- 1小时
- 全局样式和CSS变量 - 1小时
- 类型定义和常量 - 0.5小时
- MobX状态管理 - 0.5小时
- 布局组件实现（TopBar, Sidebar, MainContent）- 2小时
- 工作区组件实现（ActionButtons, RecentProjects）- 1小时

**测试验证**: 2小时
- 视觉测试
- 功能测试
- MobX响应式测试
- 可访问性测试

**总计**: 10小时（约1.5个工作日）

## 依赖关系

### 前置依赖

- 无（这是Scada平台的第一个功能）

### 后续依赖

此用户故事完成后，将支持以下功能：
- **Scada编辑器核心功能** (shared-editor包): 需要主页面框架作为容器
- **项目管理功能**: 需要主页面框架的操作按钮和工程列表
- **HMI工程文件导出**: 需要主页面框架的文件操作集成

## 风险与缓解措施

### 风险1: Electron集成复杂度

**风险描述**: Electron窗口拖拽和IPC通信可能比预期复杂

**缓解措施**:
- 当前使用Mock实现，专注于React组件开发
- 清晰标记TODO，说明需要集成的Electron API
- 保持组件与Electron解耦，便于后续集成

### 风险2: 设计还原度

**风险描述**: 实现效果与参考原型图可能有差异

**缓解措施**:
- 严格遵守设计规范（尺寸、颜色、间距）
- 使用CSS变量确保一致性
- 开发过程中持续对比原型图验证

### 风险3: MobX学习曲线

**风险描述**: 团队成员可能不熟悉MobX

**缓解措施**:
- 使用简单的`makeAutoObservable`模式
- 提供清晰的代码注释
- 保持状态管理逻辑简单明了

## 成功指标

### 用户满意度

- **界面美观度**: 用户认为界面专业、精简，符合工业软件风格
- **操作流畅度**: 用户能够流畅完成导航和操作，无明显卡顿
- **学习成本**: 用户能够在5分钟内理解界面布局和功能

### 技术指标

- **代码质量**: TypeScript编译无错误，ESLint无警告
- **测试覆盖**: 所有验收标准通过
- **性能指标**: 首屏渲染 < 100ms，交互响应 < 50ms

## 可追溯性

**关联文档**:
- 原始需求: REQ-001
- 功能需求: FE-001
- 技术方案: SOL-001
- 实施计划: IMP-001

**实施记录**:
- 实施状态: ✅ 已完成
- 完成日期: 2026-01-20
- 实施文档: IMP-001
- 代码位置: `platforms/scada/packages/renderer/src/`
- 文件数量: 27个
- 代码行数: ~600行（含注释和空行）

## 变更历史

| 版本 | 日期 | 变更内容 | 变更人 |
|------|------|----------|--------|
| 1.0 | 2026-01-20 | 初始版本，基于已完成的功能创建 | Claude Code |

## 附录

### 设计规范参考

**颜色方案**:
- 主背景: #f5f5f5
- 次背景: #ffffff
- 边框: #d0d0d0
- 激活状态: #FF9999
- 文字: #333333

**尺寸规范**:
- 顶部栏高度: 40px
- 侧边栏宽度: 80px
- 导航项高度: 70px
- 圆角: 4px

**间距系统** (4px网格):
- XS: 4px
- SM: 8px
- MD: 16px
- LG: 24px
- XL: 32px

### 技术栈参考

- **React**: 18.3.1
- **TypeScript**: Latest
- **MobX**: 6.12.0
- **Vite**: 5.4.2
- **构建模式**: 开发模式（Vite dev server）
- **Electron集成**: 准备中（当前为Mock实现）
