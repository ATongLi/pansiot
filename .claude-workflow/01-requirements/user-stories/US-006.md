# US-006: 作为HMI工程编辑器用户，我需要专业的工程编辑界面

## 用户故事

**As a** HMI工程编辑器用户
**I want** 专业的工程编辑界面，包含工具栏、侧边栏、画布和状态栏
**So that** 我可以高效地创建、编辑和管理HMI工程

## 用户角色

**主要用户**:
- HMI工程师
- 工业自动化工程师
- 组态软件用户

**用户特征**:
- 熟悉工业软件操作（WPS、Visio等）
- 需要高效的工程配置工具
- 需要同时管理多个工程
- 需要快速访问常用工具和组件
- 需要清晰的工程结构视图

## 用户场景

### 场景1: 创建新工程
**Given** 我在Scada主页面
**When** 我点击"新建工程"按钮
**Then** 应该打开新的工程标签页，标签页标题显示工程名称
**And** 应该显示工程编辑器界面，包含工具栏、侧边栏、画布和状态栏

### 场景2: 打开现有工程
**Given** 我在Scada主页面
**When** 我点击"从文件打开"并选择一个工程文件
**Then** 应该打开新的工程标签页，标签页标题显示工程名称
**And** 工程编辑器显示工程内容

### 场景3: 多工程管理
**Given** 我已经打开了工程A
**When** 我又打开了工程B
**Then** 应该显示两个工程标签页
**And** 我可以通过点击标签页在工程A和工程B之间切换
**And** 活动标签页应该高亮显示

### 场景4: 使用工具栏
**Given** 我在工程编辑器中
**When** 我需要添加组件
**Then** 我可以在顶部工具栏看到"画矩形"工具
**And** 点击该工具后按钮应该显示激活状态（蓝色背景）

### 场景5: 使用左侧导航栏
**Given** 我在工程编辑器中
**When** 我需要查看工程结构
**Then** 我可以在左侧导航栏的"项目"Tab中看到工程树形结构
**And** 我可以通过点击Tab切换到"组件"面板查看可用组件
**And** 我可以切换到"属性"面板编辑选中对象的属性

### 场景6: 在画布中编辑
**Given** 我在工程编辑器中
**When** 我需要在画布中添加组件
**Then** 我可以拖拽左侧"组件"面板中的组件到画布
**And** 画布应该显示网格背景帮助我对齐
**And** 我可以在底部状态栏看到鼠标坐标和缩放比例

### 场景7: 保存工程
**Given** 我正在编辑工程
**When** 我修改了内容但还未保存
**Then** 工程标签页应该显示未保存标识（小圆点）
**When** 我点击工具栏的"保存"按钮
**Then** 未保存标识应该消失
**And** 底部状态栏应该显示"保存成功"

### 场景8: 使用子工具栏
**Given** 我选中了画布上的一个矩形组件
**When** 我需要修改矩形的颜色
**Then** 子工具栏应该显示矩形的属性控件（填充色、边框色等）
**When** 我点击颜色选择器选择红色
**Then** 矩形应该立即更新为红色

### 场景9: 调整视图
**Given** 我在工程编辑器中
**When** 我需要放大画布查看细节
**Then** 我可以点击底部状态栏的放大按钮
**And** 画布应该放大显示
**And** 缩放比例应该更新显示

## 用户价值

### 效率提升
- **快速访问**: 常用工具集中在工具栏，一键操作
- **多工程管理**: 标签页机制支持同时编辑多个工程
- **上下文相关**: 子工具栏根据选中对象动态显示相关工具

### 清晰视图
- **工程结构**: 左侧导航栏提供清晰的工程树形结构
- **组件库**: 可视化组件库，拖拽即用
- **属性编辑**: 两列属性面板，一目了然

### 专业体验
- **工业设计**: 参考WPS、Visio等专业软件的设计风格
- **一致交互**: 遵循Windows平台交互规范
- **视觉反馈**: 所有操作都有清晰的视觉反馈

## 验收标准

### 功能验收
- [ ] 新建工程后打开新标签页
- [ ] 打开工程后打开新标签页
- [ ] 标签页显示工程名称和图标
- [ ] 支持多标签页切换
- [ ] 支持关闭标签页
- [ ] 工具栏按钮可点击（当前Mock）
- [ ] 左侧导航栏Tab可切换
- [ ] 各面板显示正确
- [ ] 画布区域显示正常
- [ ] 状态栏信息正确显示

### 视觉验收
- [ ] 整体布局协调，配色和谐
- [ ] 遵循工业设计风格
- [ ] 所有组件样式一致性
- [ ] 工具栏图标清晰可辨
- [ ] 左侧导航栏Tab样式正确
- [ ] 子页面标签页样式正确
- [ ] 状态栏布局合理

### 交互验收
- [ ] 所有按钮有悬停效果
- [ ] Tab切换有视觉反馈
- [ ] 工具栏按钮有按下状态
- [ ] 响应式布局（窗口缩放时适配）

## 用户反馈点

### 关键反馈点
1. **布局合理性**: 五区域布局是否合理？是否需要调整？
2. **工具栏组织**: 工具栏按钮分组是否合理？是否容易找到？
3. **左侧导航栏**: Tab切换是否流畅？面板内容是否清晰？
4. **画布体验**: 画布尺寸是否合适？网格是否帮助对齐？
5. **状态栏信息**: 状态栏显示的信息是否足够？是否需要更多？

### 改进建议收集
- 用户测试后收集改进建议
- 记录常用操作路径
- 优化界面布局
- 改进交互体验

## 技术约束

- 遵循STYLE_GUIDE.md设计规范
- 使用React + TypeScript + MobX
- 使用Plain CSS，不使用CSS-in-JS
- 所有组件模块化、可复用

## 依赖用户故事

**前置用户故事**:
- US-001: Scada主页面框架

**后续用户故事**:
- 画布交互功能
- 组件拖拽功能
- 属性编辑功能
- 数据绑定功能
- 工程保存加载功能

## 关联文档

- 原始需求: REQ-006
- 功能需求: FE-006
- 技术方案: SOL-006 (待设计)
- 实施计划: IMP-006 (待制定)
